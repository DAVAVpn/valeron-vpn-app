<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #0b0f1a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --accent: linear-gradient(135deg, #38bdf8 0%, #818cf8 100%);
            --gold: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            --text: #f8fafc;
        }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at top right, #1e293b, #0b0f1a);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; padding: 0;
        }

        /* Навигация */
        .tabs {
            display: flex; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px);
            padding: 8px; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .tab-btn {
            flex: 1; padding: 12px 5px; border: none; background: none; color: white;
            opacity: 0.4; font-weight: 600; font-size: 11px; text-transform: uppercase; transition: 0.3s;
        }
        .tab-btn.active { opacity: 1; color: #38bdf8; border-bottom: 2px solid #38bdf8; }

        .content { padding: 20px; display: none; animation: fadeIn 0.4s ease; }
        .content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Карточки */
        .card {
            background: var(--card-bg); backdrop-filter: blur(12px); padding: 16px;
            border-radius: 16px; margin-bottom: 12px; display: flex; justify-content: space-between;
            align-items: center; border: 1px solid rgba(255,255,255,0.1);
        }
        .server-info { display: flex; align-items: center; gap: 12px; }
        .status-dot { width: 8px; height: 8px; background: #4ade80; border-radius: 50%; display: inline-block; margin-right: 6px; box-shadow: 0 0 8px #4ade80; }

        .btn-get {
            background: var(--accent); color: #0f172a; border: none; padding: 10px 18px;
            border-radius: 10px; font-weight: 800; font-size: 12px; cursor: pointer;
        }

        /* Профиль и VIP */
        .profile-box {
            text-align: center; padding: 25px; background: var(--card-bg);
            border-radius: 24px; border: 1px solid rgba(56, 189, 248, 0.2);
        }
        .user-avatar {
            width: 70px; height: 70px; background: var(--accent); border-radius: 50%;
            margin: 0 auto 10px; display: flex; align-items: center; justify-content: center;
            font-size: 28px; font-weight: bold; box-shadow: 0 0 15px rgba(56, 189, 248, 0.3);
        }
        .vip-card {
            margin-top: 20px; background: linear-gradient(135deg, rgba(251,191,36,0.1) 0%, rgba(0,0,0,0.3) 100%);
            padding: 15px; border-radius: 16px; border: 1px solid rgba(251,191,36,0.3); text-align: left;
        }
        .dl-link {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            padding: 12px; margin-top: 10px; border-radius: 12px; text-decoration: none;
            font-weight: 700; font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('servers')">Серверы</button>
        <button class="tab-btn" onclick="openTab('guide')">Инструкция</button>
        <button class="tab-btn" onclick="openTab('profile')">Профиль</button>
    </div>

    <div id="servers" class="content active">
        <div class="card">
            <div class="server-info"><span>🇳🇱</span><div><b>Нидерланды</b><br><small><span class="status-dot"></span>15ms</small></div></div>
            <button class="btn-get" onclick="sendToBot('get_key_nl')">ВЗЯТЬ</button>
        </div>
        <div class="card">
            <div class="server-info"><span>🇩🇪</span><div><b>Германия</b><br><small><span class="status-dot"></span>28ms</small></div></div>
            <button class="btn-get" onclick="sendToBot('get_key_de')">ВЗЯТЬ</button>
        </div>
        <div class="card">
            <div class="server-info"><span>🇹🇷</span><div><b>Турция</b><br><small><span class="status-dot"></span>45ms</small></div></div>
            <button class="btn-get" onclick="sendToBot('get_key_tr')">ВЗЯТЬ</button>
        </div>
    </div>

    <div id="guide" class="content">
        <div class="profile-box" style="text-align: left;">
            <h3>1. Установи V2RayTun</h3>
            <a href="https://play.google.com/store/apps/details?id=com.v2raytun.android" target="_blank" class="dl-link" style="background:#3ddc84; color:#073042;">Android Play Store</a>
            <a href="https://apps.apple.com/ru/app/v2raytun/id6476628951" target="_blank" class="dl-link" style="background:#fff; color:#000;">iOS App Store</a>
            <h3>2. Подключись</h3>
            <p style="font-size: 13px; opacity: 0.7;">Нажми «ВЗЯТЬ» в списке серверов, скопируй ключ и вставь его в приложении через кнопку ➕ (Import from Clipboard).</p>
        </div>
    </div>

    <div id="profile" class="content">
        <div class="profile-box">
            <div class="user-avatar" id="avatarLetter">U</div>
            <h2 id="userName" style="margin: 5px 0;">User</h2>
            <div style="display: flex; gap: 10px; margin: 15px 0;">
                <div style="flex:1; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px;">
                    <small style="opacity:0.5;">БАЛАНС</small><br><b>0.00 ₽</b>
                </div>
                <div style="flex:1; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px;">
                    <small style="opacity:0.5;">ДРУЗЬЯ</small><br><b>0</b>
                </div>
            </div>
            
            <div class="vip-card">
                <div style="color:#fbbf24; font-weight:bold; margin-bottom:5px;">👑 VIP СТАТУС</div>
                <small style="opacity:0.7;">Доступ к приватным серверам без ограничений.</small>
                <button class="btn-get" style="background:var(--gold); width:100%; margin-top:10px;" onclick="sendToBot('buy_vip')">КУПИТЬ VIP ЗА 199₽</button>
            </div>

            <button class="btn-get" style="width:100%; margin-top:15px; background:rgba(56,189,248,0.1); color:#38bdf8; border:1px solid #38bdf8;" onclick="sendToBot('get_ref_link')">🎁 ПРИГЛАСИТЬ ДРУГА (+1 ДЕНЬ)</button>
        </div>
    </div>

    <script>
        var tg = window.Telegram.WebApp;
        tg.expand();
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            document.getElementById('userName').innerText = tg.initDataUnsafe.user.first_name;
            document.getElementById('avatarLetter').innerText = tg.initDataUnsafe.user.first_name.charAt(0);
        }
        function openTab(tabId) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        function sendToBot(command) { tg.sendData(command); tg.close(); }
        document.addEventListener('click', function(e) {
            var target = e.target.closest('a');
            if (target && target.href.startsWith('http')) {
                e.preventDefault(); tg.openLink(target.href);
            }
        });
    </script>
</body>
</html>