<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #0b0f1a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --accent: linear-gradient(135deg, #38bdf8 0%, #818cf8 100%);
            --gold: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            --text: #f8fafc;
        }
        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at top right, #1e293b, #0b0f1a);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0; padding: 0;
        }
        .tabs {
            display: flex; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px);
            padding: 8px; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .tab-btn {
            flex: 1; padding: 12px 5px; border: none; background: none; color: white;
            opacity: 0.4; font-weight: 600; font-size: 11px; text-transform: uppercase; transition: 0.3s;
        }
        .tab-btn.active { opacity: 1; color: #38bdf8; border-bottom: 2px solid #38bdf8; }
        .content { padding: 20px; display: none; animation: fadeIn 0.4s ease; }
        .content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card {
            background: var(--card-bg); backdrop-filter: blur(12px); padding: 16px;
            border-radius: 16px; margin-bottom: 12px; display: flex; justify-content: space-between;
            align-items: center; border: 1px solid rgba(255,255,255,0.1);
        }
        .btn-get {
            background: var(--accent); color: #0f172a; border: none; padding: 10px 18px;
            border-radius: 10px; font-weight: 800; font-size: 12px; cursor: pointer;
        }
        .profile-box {
            text-align: center; padding: 25px; background: var(--card-bg);
            border-radius: 24px; border: 1px solid rgba(56, 189, 248, 0.2);
        }
        .vip-card {
            margin-top: 20px; background: linear-gradient(135deg, rgba(251,191,36,0.1) 0%, rgba(0,0,0,0.3) 100%);
            padding: 15px; border-radius: 16px; border: 1px solid rgba(251,191,36,0.3); text-align: left;
        }
        .input-pay {
            width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #38bdf8;
            background: #0f172a; color: white; margin-bottom: 10px; box-sizing: border-box; outline: none;
        }
    </style>
</head>
<body>
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('servers')">Серверы</button>
        <button class="tab-btn" onclick="openTab('guide')">Инструкция</button>
        <button class="tab-btn" onclick="openTab('profile')">Профиль</button>
    </div>

    <div id="servers" class="content active">
        <div class="card"><span>🇳🇱 Нидерланды</span><button class="btn-get" onclick="sendToBot('get_key_nl')">ВЗЯТЬ</button></div>
        <div class="card"><span>🇩🇪 Германия</span><button class="btn-get" onclick="sendToBot('get_key_de')">ВЗЯТЬ</button></div>
        <div class="card"><span>🇹🇷 Турция</span><button class="btn-get" onclick="sendToBot('get_key_tr')">ВЗЯТЬ</button></div>
    </div>

    <div id="guide" class="content">
        <div class="profile-box" style="text-align: left;">
            <p>1. Скачай <b>V2RayTun</b> в App Store или Play Store.</p>
            <p>2. Скопируй ключ в боте.</p>
            <p>3. В приложении нажми ➕ и выбери <b>Import from Clipboard</b>.</p>
        </div>
    </div>

    <div id="profile" class="content">
        <div class="profile-box">
            <h2 id="userName">User</h2>
            <div style="display: flex; gap: 10px; margin: 15px 0;">
                <div style="flex:1; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px;">
                    <small style="opacity:0.5;">БАЛАНС</small><br><b id="userBalance">0.00 ₽</b>
                </div>
            </div>

            <div style="text-align: left; margin-top: 10px;">
                <input type="number" id="payAmount" class="input-pay" placeholder="Сумма (₽)">
                <button class="btn-get" style="width: 100%;" onclick="startPay()">ПОПОЛНИТЬ БАЛАНС</button>
            </div>
            
            <div class="vip-card">
                <div style="color:#fbbf24; font-weight:bold;">👑 VIP СТАТУС</div>
                <small>Скорость 1 Гбит/с и Premium локации.</small>
                <button class="btn-get" style="background:var(--gold); width:100%; margin-top:10px;" onclick="sendToBot('buy_vip')">КУПИТЬ VIP ЗА 199₽</button>
            </div>
            <button class="btn-get" style="width:100%; margin-top:15px; background:none; color:#38bdf8; border:1px solid #38bdf8;" onclick="sendToBot('get_ref_link')">🎁 ПРИГЛАСИТЬ ДРУГА</button>
        </div>
    </div>

    <script>
        var tg = window.Telegram.WebApp;
        tg.expand();
        document.getElementById('userName').innerText = tg.initDataUnsafe.user.first_name;

        function openTab(tabId) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function startPay() {
            const val = document.getElementById('payAmount').value;
            if (val >= 10) { sendToBot('pay_' + val); } else { alert('Мин. сумма 10₽'); }
        }

        function sendToBot(command) { tg.sendData(command); tg.close(); }
    </script>
</body>
</html>